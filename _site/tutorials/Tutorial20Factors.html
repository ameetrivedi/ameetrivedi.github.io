<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/assets/ico/favicon.ico">
    
    <title>FACTORIE: Factor</title>
    
    <!-- Bootstrap core CSS -->
    <link href="/assets/css/bootstrap-custom.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/assets/css/jumbotron.css" rel="stylesheet">
    <link href="/assets/css/offcanvas.css" rel="stylesheet">
    <link href="/assets/css/affix.css" rel="stylesheet">
    
    <!-- For Pygments syntax highlighting -->
    <link href="/assets/css/pygments/github.css" rel="stylesheet">
    
  </head>
  <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
      
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-img" href="/index.html"><img src="/assets/images/factorie-logo-smaller.png"/></a><a class="navbar-brand" href="/index.html">FACTORIE</a>
        </div>
        <div class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
  				
  				
      

      

      
         
            <li><a href="/index.html">Home</a></li>
         
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      
         
            <li><a href="/download.html">Download</a></li>
         
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      
         
            <li><a href="/news.html">News</a></li>
         
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      



					<li class="dropdown">
		              <a id="drop1" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
		              <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
		                <li role="presentation"><a role="menuitem" tabindex="-1" href="/tutorials/UsersGuide20Installation.html">Installation</a></li>
		                <li role="presentation"><a role="menuitem" tabindex="-1" href="/tutorials/UsersGuide25QuickStart.html">Quick Start</a></li>
		                <li role="presentation"><a role="menuitem" tabindex="-1" href="/tutorials/UsersGuide10Introduction.html">Users Guide</a></li>
		                <li role="presentation"><a role="menuitem" tabindex="-1" href="/tutorials/Tutorial10Variables.html">Tutorials</a></li>
		                <li role="presentation"><a role="menuitem" tabindex="-1" href="/faqs.html">FAQs</a></li>  
 		                <li role="presentation" class="divider"></li>
		                <li role="presentation"><a role="menuitem" tabindex="-1" href="scaladocs/#cc.factorie.package">Scaladocs</a></li>
		              </ul>
		           </li>
				</ul>			
			</div><!-- /.nav-collapse -->
  </div><!-- /.container -->
</div><!-- /.navbar -->
  <div class="container">
	 <div class="row row-offcanvas row-offcanvas-left">
     <div class="col-xs-12 col-sm-9">
       <p class="pull-left visible-xs">
         <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
       </p>
     </div>
	 <div class="col-xs-2 col-sm-3 col-md-2 bs-sidebar sidebar-offcanvas affix" id="sidebar" role="navigation"> 
	 <ul class="nav nav-list">
  <li class="nav-header">Users Guide</li>
  
  
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/UsersGuide10Introduction.html">Introduction</a></li>
         
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/UsersGuide20Installation.html">Installation</a></li>
         
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/UsersGuide25QuickStart.html">Quick Start</a></li>
         
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/UsersGuide30Overview.html">Overview</a></li>
         
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/UsersGuide60Inference.html">Inference</a></li>
         
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/UsersGuide70LearningAndOptimization.html">Learning and Optimization</a></li>
         
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 


  <li class="nav-header">Tutorials</li>
  
  
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/Tutorial10Variables.html">Variable</a></li>
         
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/Tutorial11Domain.html">Domain</a></li>
         
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li class="active"><a href="/tutorials/Tutorial20Factors.html">Factor</a></li>
         
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/Tutorial21Family.html">Family</a></li>
         
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/Tutorial30Model.html">Model</a></li>
         
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/Tutorial32Template.html">Template</a></li>
         
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/Tutorial60Learning.html">Learning and Optimization</a></li>
         
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
   
      
         
            <li><a href="/tutorials/Tutorial90ParallelismAndHyperparameters.html">Parallelism</a></li>
         
      
   
      
   
      
   
      
   
      
   
      
   
      
   
 


  <li class="nav-divider"></li>
  <li class="nav-noindent"><a href="http://www.iesl.cs.umass.edu">IESL</a></li>
  <li class="nav-noindent"><a href="https://groups.google.com/a/factorie.cs.umass.edu/forum/#!forum/discuss">Mailing List</a></li>  
  
      

      

      

      

      

      

      
         
            <li class="nav-noindent"><a href="/pubs.html">Publications and Sponsors</a></li>
         
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      


</ul>
 
	 </div>
	 <div class="col-xs-10 col-sm-9 col-md-9 pull-right" id="main" role="content">
	 <h1>Factor Tutorial</h1>

<p>A Factor is a container for an ordered set of neighboring variables,
and can return &quot;scores&quot; and &quot;statistics&quot; based on values for those neighbors.</p>
<div class="highlight"><pre><code class="scala language-scala" data-lang="scala"><span class="k">package</span> <span class="nn">cc.factorie.tutorial</span>
<span class="k">object</span> <span class="nc">TutorialFactors</span> <span class="k">extends</span> <span class="nc">App</span> <span class="o">{</span>
  <span class="k">import</span> <span class="nn">org.junit.Assert._</span>
  <span class="k">import</span> <span class="nn">cc.factorie._</span>
  <span class="k">import</span> <span class="nn">cc.factorie.la._</span>
  <span class="k">import</span> <span class="nn">cc.factorie.variable._</span>
  <span class="k">import</span> <span class="nn">scala.Tuple2</span>
  <span class="k">import</span> <span class="nn">cc.factorie.model._</span>
  <span class="k">import</span> <span class="nn">scala.Tuple2</span>

    <span class="c1">// First we&#39;ll create some variables for us as Factor neighbors. </span>
    <span class="k">val</span> <span class="n">v1</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">IntegerVariable</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
    <span class="k">val</span> <span class="n">v2</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">DoubleVariable</span><span class="o">(</span><span class="mf">2.0</span><span class="o">)</span>
    <span class="k">val</span> <span class="n">v3</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">IntegerVariable</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
</code></pre></div>
<p>There are classes Factor1, Factor2, Factor3, Factor4 for Factors with 1-4 neighboring variables.</p>

<p>(If you want a Factor that has more than 4 neighbors,
and many of your neighbors are of the same Variable class,
there is a &quot;var-args&quot; construction available, which will be explained below.
You could also create your own subclass of the trait &quot;Factor&quot;.)</p>
<div class="highlight"><pre><code class="scala language-scala" data-lang="scala">    <span class="c1">// Here is a factor with one neighbor.</span>
    <span class="k">val</span> <span class="n">f1</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Factor1</span><span class="o">(</span><span class="n">v1</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">def</span> <span class="n">score</span><span class="o">(</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="mf">0.0</span> <span class="k">else</span> <span class="o">-</span><span class="mf">1.0</span>
    <span class="o">}</span>
</code></pre></div>
<p>The only method that is abstract in Factor1-Factor4 classes is the &quot;score&quot; method.
Its arguments are the values of the neighboring variables, in order.
It must return a Double.
NegInfinity indicates &quot;impossible values on neighbors&quot;.
More positive scores indicate higher likelihood.
In terms of probabilities these scores can be interpreted as &quot;unnormalized log-probabilities&quot;.
If you do have a normalized probability for a factor, the score should be <code>math.log(probability)</code>.</p>
<div class="highlight"><pre><code class="scala language-scala" data-lang="scala">    <span class="c1">// Naturally, then we can get the factor&#39;s score for particular values of the neighboring variable(s).</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;First factor score for value 0 is &quot;</span><span class="o">+</span><span class="n">f1</span><span class="o">.</span><span class="n">score</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span>
    <span class="n">assertEquals</span><span class="o">(-</span><span class="mf">1.0</span><span class="o">,</span> <span class="n">f1</span><span class="o">.</span><span class="n">score</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="mf">0.01</span><span class="o">)</span>

    <span class="c1">// We can also ask for the score resulting from the neighbors current values.</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;First factor score for current neighbor value is &quot;</span><span class="o">+</span><span class="n">f1</span><span class="o">.</span><span class="n">currentScore</span><span class="o">)</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="n">f1</span><span class="o">.</span><span class="n">currentScore</span><span class="o">,</span> <span class="mf">0.1</span><span class="o">)</span>

    <span class="c1">// Here is a Factor with two neighbors.</span>
    <span class="c1">// The second neighbor is a DoubleVariable and has value type Double.</span>
    <span class="k">val</span> <span class="n">f2</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Factor2</span><span class="o">(</span><span class="n">v1</span><span class="o">,</span> <span class="n">v2</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">def</span> <span class="n">score</span><span class="o">(</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span><span class="kt">Double</span><span class="o">)</span> <span class="k">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span>
    <span class="o">}</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Second factor score is &quot;</span><span class="o">+</span><span class="n">f2</span><span class="o">.</span><span class="n">currentScore</span><span class="o">)</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mf">2.0</span><span class="o">,</span> <span class="n">f2</span><span class="o">.</span><span class="n">currentScore</span><span class="o">,</span> <span class="mf">0.01</span><span class="o">)</span>

    <span class="c1">// Given a factor I can get its list of neighbors, or individual neighbors</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Second factor neighbors are &quot;</span><span class="o">+</span><span class="n">f2</span><span class="o">.</span><span class="n">variables</span><span class="o">)</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Second factor first neighbor is &quot;</span><span class="o">+</span><span class="n">f2</span><span class="o">.</span><span class="n">variable</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span>
    <span class="n">assert</span><span class="o">(</span><span class="n">f2</span><span class="o">.</span><span class="n">variable</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">==</span> <span class="n">v1</span><span class="o">)</span>

    <span class="c1">// We can also ask if a Factor has a variable among its neighbors</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">f2</span><span class="o">.</span><span class="n">touches</span><span class="o">(</span><span class="n">v3</span><span class="o">))</span> <span class="n">println</span><span class="o">(</span><span class="s">&quot;Second factor has v3 as a neighbor.&quot;</span><span class="o">)</span>
    <span class="n">assert</span><span class="o">(!</span><span class="n">f2</span><span class="o">.</span><span class="n">touches</span><span class="o">(</span><span class="n">v3</span><span class="o">))</span>

    <span class="c1">// Factors can be given a customized named used in their toString method</span>
    <span class="k">val</span> <span class="n">f2b</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Factor2</span><span class="o">(</span><span class="n">v1</span><span class="o">,</span> <span class="n">v2</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">def</span> <span class="n">score</span><span class="o">(</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span><span class="kt">Double</span><span class="o">)</span> <span class="k">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span>
      <span class="k">override</span> <span class="k">def</span> <span class="n">factorName</span> <span class="k">=</span> <span class="s">&quot;Factor2B&quot;</span>
    <span class="o">}</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Factor with custom name &quot;</span><span class="o">+</span><span class="n">f2b</span><span class="o">)</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;Factor2B&quot;</span><span class="o">,</span> <span class="n">f2b</span><span class="o">.</span><span class="n">factorName</span><span class="o">)</span>

    <span class="c1">// We can get an Assignment object that captures the current values of the neighbors.</span>
    <span class="k">val</span> <span class="n">a2</span><span class="k">:</span> <span class="kt">Assignment2</span><span class="o">[</span><span class="kt">IntegerVariable</span>,<span class="kt">DoubleVariable</span><span class="o">]</span> <span class="k">=</span> <span class="n">f2</span><span class="o">.</span><span class="n">currentAssignment</span>
    <span class="n">v2</span> <span class="o">:=</span> <span class="mf">4.4</span> <span class="c1">// Here we give v2 a new value.</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Second neighbor of second factor had value &quot;</span><span class="o">+</span><span class="n">a2</span><span class="o">(</span><span class="n">v2</span><span class="o">))</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mf">2.0</span><span class="o">,</span> <span class="n">a2</span><span class="o">(</span><span class="n">v2</span><span class="o">),</span> <span class="mf">0.01</span><span class="o">)</span>

    <span class="c1">// We can ask for a factor&#39;s score using the values in an Assignment</span>
    <span class="c1">// rather than the neighbors current values</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Second factor&#39;s score from old assignment is &quot;</span><span class="o">+</span><span class="n">f2</span><span class="o">.</span><span class="n">assignmentScore</span><span class="o">(</span><span class="n">a2</span><span class="o">))</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mf">2.0</span><span class="o">,</span> <span class="n">f2</span><span class="o">.</span><span class="n">assignmentScore</span><span class="o">(</span><span class="n">a2</span><span class="o">),</span> <span class="mf">0.01</span><span class="o">)</span>

    <span class="c1">// The Assignment object could contain values for more variables than the neighbors</span>
    <span class="k">val</span> <span class="n">as</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">HashMapAssignment</span><span class="o">(</span><span class="n">v1</span><span class="o">,</span> <span class="n">v2</span><span class="o">,</span> <span class="n">v3</span><span class="o">)</span>
    <span class="n">as</span><span class="o">.</span><span class="n">update</span><span class="o">[</span><span class="kt">IntegerVariable</span><span class="o">](</span><span class="n">v1</span><span class="o">,</span> <span class="mi">44</span><span class="o">)</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;Second factor&#39;s score from a new assignment is &quot;</span><span class="o">+</span><span class="n">f2</span><span class="o">.</span><span class="n">assignmentScore</span><span class="o">(</span><span class="n">as</span><span class="o">))</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">44</span><span class="o">*</span><span class="mf">4.4</span><span class="o">,</span> <span class="n">f2</span><span class="o">.</span><span class="n">assignmentScore</span><span class="o">(</span><span class="n">as</span><span class="o">),</span> <span class="mf">0.01</span><span class="o">)</span>

    <span class="c1">// All factors also have &quot;statistics&quot;</span>
    <span class="c1">// This is some arbitrary object that holds information sufficient to obtain a score.</span>
    <span class="c1">// (Although this sufficiency is not enforced.)</span>
    <span class="k">val</span> <span class="n">s2</span> <span class="k">=</span> <span class="n">f2</span><span class="o">.</span><span class="n">statistics</span><span class="o">(</span><span class="mi">77</span><span class="o">,</span><span class="mf">8.8</span><span class="o">)</span>

    <span class="c1">// As with &quot;score&quot; we can get the statistics corresponding to the neighbors current values</span>
    <span class="k">val</span> <span class="n">s2c</span> <span class="k">=</span> <span class="n">f2</span><span class="o">.</span><span class="n">currentStatistics</span>

    <span class="c1">// The default statistics are a Tuple containing the values of the neighbors.</span>
    <span class="c1">// However the known return type is Any, so it must be cast to use.</span>
    <span class="c1">// (This lack of typing is because we want the method to be flexibly override-able in subclasses.)</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">s2</span><span class="o">.</span><span class="n">asInstanceOf</span><span class="o">[(</span><span class="kt">Int</span>, <span class="kt">Double</span><span class="o">)].</span><span class="n">_2</span> <span class="o">==</span> <span class="mf">4.4</span><span class="o">)</span>
      <span class="n">println</span><span class="o">(</span><span class="s">&quot;The second factor&#39;s second value is 4.4&quot;</span><span class="o">)</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mf">8.8</span><span class="o">,</span> <span class="n">s2</span><span class="o">.</span><span class="n">asInstanceOf</span><span class="o">[(</span><span class="kt">Int</span>, <span class="kt">Double</span><span class="o">)].</span><span class="n">_2</span><span class="o">,</span> <span class="mf">0.01</span><span class="o">)</span>

    <span class="c1">// Some subclasses of Factor override the method to return more specific types.</span>
    <span class="c1">// If the Tuple statistics are sufficient for your needs, </span>
    <span class="c1">// and you want the &quot;statistics&quot; method&#39;s return type to be the correct Tuple</span>
    <span class="c1">// use the classes TupleFactor*</span>
    <span class="k">val</span> <span class="n">f3</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">TupleFactorWithStatistics3</span><span class="o">(</span><span class="n">v1</span><span class="o">,</span> <span class="n">v2</span><span class="o">,</span> <span class="n">v3</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">def</span> <span class="n">score</span><span class="o">(</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span><span class="kt">Double</span><span class="o">,</span> <span class="n">k</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">k</span><span class="o">)</span> <span class="n">j</span> <span class="k">else</span> <span class="mf">0.0</span>
    <span class="o">}</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;The current value of the third neighbor is &quot;</span><span class="o">+</span><span class="n">f3</span><span class="o">.</span><span class="n">currentStatistics</span><span class="o">.</span><span class="n">_3</span><span class="o">)</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mf">3.0</span><span class="o">,</span> <span class="n">f3</span><span class="o">.</span><span class="n">currentStatistics</span><span class="o">.</span><span class="n">_3</span><span class="o">,</span> <span class="mf">0.01</span><span class="o">)</span>

    <span class="c1">// The various Factor subclasses containing &quot;WithStatistics&quot; in the class name</span>
    <span class="c1">// all contain a new final definition of the &quot;statistics&quot; method.</span>
    <span class="c1">// For example, if I subclass TupleFactorWithStatistics3, I cannot redefine the &quot;statistics&quot; method.</span>
    <span class="k">val</span> <span class="n">f3b</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">TupleFactorWithStatistics3</span><span class="o">(</span><span class="n">v1</span><span class="o">,</span> <span class="n">v2</span><span class="o">,</span> <span class="n">v3</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">def</span> <span class="n">score</span><span class="o">(</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span><span class="kt">Double</span><span class="o">,</span> <span class="n">k</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">k</span><span class="o">)</span> <span class="n">j</span> <span class="k">else</span> <span class="mf">0.0</span>
      <span class="c1">// If uncommented, the next line would cause a compilation error:</span>
      <span class="c1">//def statistics(i:Int, j:Double, k:Int) = Tuple(i, k)</span>
    <span class="o">}</span>

    <span class="c1">// In the plain &quot;Factor1-4&quot; classes you can override statistics to return any type you like,</span>
    <span class="c1">// but you have to set the type member StatisticsType to match.</span>
    <span class="k">val</span> <span class="n">f4</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Factor2</span><span class="o">(</span><span class="n">v1</span><span class="o">,</span> <span class="n">v3</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">type</span> <span class="kt">StatisticsType</span> <span class="o">=</span> <span class="nc">Boolean</span>
      <span class="k">override</span> <span class="k">def</span> <span class="n">statistics</span><span class="o">(</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="n">i</span> <span class="o">==</span> <span class="n">j</span>
      <span class="k">def</span> <span class="n">score</span><span class="o">(</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">statistics</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">))</span> <span class="mf">1.0</span> <span class="k">else</span> <span class="o">-</span><span class="mf">1.0</span>
    <span class="o">}</span>

    <span class="c1">// Factors with Tensor-valued statistics are widely-used.</span>

    <span class="c1">// First let&#39;s make some Tensor-valued variables.</span>
    <span class="k">object</span> <span class="nc">LabelDomain</span> <span class="k">extends</span> <span class="nc">CategoricalDomain</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="s">&quot;politics&quot;</span><span class="o">,</span> <span class="s">&quot;sports&quot;</span><span class="o">,</span> <span class="s">&quot;arts&quot;</span><span class="o">))</span>
    <span class="k">class</span> <span class="nc">Label</span><span class="o">(</span><span class="n">initialValue</span><span class="k">:</span><span class="kt">String</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">CategoricalVariable</span><span class="o">(</span><span class="n">initialValue</span><span class="o">)</span> <span class="o">{</span> <span class="k">def</span> <span class="n">domain</span> <span class="k">=</span> <span class="nc">LabelDomain</span> <span class="o">}</span>
    <span class="k">val</span> <span class="n">label1</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Label</span><span class="o">(</span><span class="s">&quot;arts&quot;</span><span class="o">)</span>
    <span class="k">val</span> <span class="n">label2</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Label</span><span class="o">(</span><span class="s">&quot;arts&quot;</span><span class="o">)</span>
    <span class="k">val</span> <span class="n">label3</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Label</span><span class="o">(</span><span class="s">&quot;arts&quot;</span><span class="o">)</span>
    <span class="c1">// Remember, BooleanVariables have value BooleanValue, which inherits from SingletonBinaryTensor1</span>
    <span class="k">val</span> <span class="n">flag1</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">BooleanVariable</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span> 
    <span class="k">val</span> <span class="n">flag2</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">BooleanVariable</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>

    <span class="c1">// Here is a factor whose statistics are an outer product of the Tensor values of both neighbors.</span>
    <span class="c1">// The score is the dot product between this tensor an a Tensor of &quot;weightsSet&quot; parameters.</span>
    <span class="k">val</span> <span class="n">f5</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Factor2</span><span class="o">(</span><span class="n">label1</span><span class="o">,</span> <span class="n">label2</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">type</span> <span class="kt">StatisticsType</span> <span class="o">=</span> <span class="nc">Tensor</span>
      <span class="k">val</span> <span class="n">weights</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">DenseTensor2</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="mf">2.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">),</span> <span class="nc">Array</span><span class="o">(</span><span class="mf">1.0</span><span class="o">,</span> <span class="mf">2.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">),</span> <span class="nc">Array</span><span class="o">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">,</span> <span class="mf">2.0</span><span class="o">)))</span>
      <span class="c1">// Label#Value is a CategoricalValue[String], and a subclass of SingletonBinaryTensor1</span>
      <span class="k">override</span> <span class="k">def</span> <span class="n">statistics</span><span class="o">(</span><span class="n">lv1</span><span class="k">:</span><span class="kt">Label</span><span class="k">#</span><span class="kt">Value</span><span class="o">,</span> <span class="n">lv2</span><span class="k">:</span><span class="kt">Label</span><span class="k">#</span><span class="kt">Value</span><span class="o">)</span><span class="k">:</span> <span class="kt">Tensor</span> <span class="o">=</span> <span class="n">lv1</span> <span class="n">outer</span> <span class="n">lv2</span>
      <span class="k">def</span> <span class="n">score</span><span class="o">(</span><span class="n">lv1</span><span class="k">:</span><span class="kt">Label</span><span class="k">#</span><span class="kt">Value</span><span class="o">,</span> <span class="n">lv2</span><span class="k">:</span><span class="kt">Label</span><span class="k">#</span><span class="kt">Value</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="n">weights</span> <span class="n">dot</span> <span class="n">statistics</span><span class="o">(</span><span class="n">lv1</span><span class="o">,</span> <span class="n">lv2</span><span class="o">)</span> 
    <span class="o">}</span>
</code></pre></div>
<p>It is up to you to make the dimensions of the weightsSet Tensor match the dimensions of the statistics Tensor
There are no compile-time checks for this.</p>

<p>Since Factors with Tensor statistics are common, there are Factor classes that pre-define this,
avoiding the need to assign StatisticsType.</p>

<p>The method &quot;score&quot; is pre-defined to gather these Tensor statistics and call &quot;scoreStatistics(Tensor)&quot;.
(This enforces that the Tensor statistics are sufficient to calculate the score.)
In TensorFactor2 only &quot;statistics&quot; and &quot;scoreStatistics&quot; are abstract.</p>
<div class="highlight"><pre><code class="scala language-scala" data-lang="scala">    <span class="k">val</span> <span class="n">f6</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">TensorFactor2</span><span class="o">(</span><span class="n">flag1</span><span class="o">,</span> <span class="n">flag2</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">val</span> <span class="n">weights</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">DenseTensor2</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="mf">3.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">),</span> <span class="nc">Array</span><span class="o">(</span><span class="mf">2.0</span><span class="o">,</span> <span class="mf">4.0</span><span class="o">)))</span>
      <span class="k">override</span> <span class="k">def</span> <span class="n">statistics</span><span class="o">(</span><span class="n">fv1</span><span class="k">:</span><span class="kt">BooleanValue</span><span class="o">,</span> <span class="n">fv2</span><span class="k">:</span><span class="kt">BooleanValue</span><span class="o">)</span><span class="k">:</span> <span class="kt">Tensor</span> <span class="o">=</span> <span class="n">fv1</span> <span class="n">outer</span> <span class="n">fv2</span>
      <span class="k">def</span> <span class="n">statisticsScore</span><span class="o">(</span><span class="n">tensor</span><span class="k">:</span><span class="kt">Tensor</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="n">weights</span> <span class="n">dot</span> <span class="n">tensor</span>
    <span class="o">}</span>
</code></pre></div>
<p>Because it is also common that the statistics are the outer product of the neighbors Tensor values,
there are also TensorFactor* subclasses that pre-define &quot;statistics&quot; in this way.
Only the &quot;scoreStatistics(Tensor)&quot; method is abstract.</p>
<div class="highlight"><pre><code class="scala language-scala" data-lang="scala">    <span class="k">val</span> <span class="n">f7</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">TensorFactorWithStatistics2</span><span class="o">(</span><span class="n">flag1</span><span class="o">,</span> <span class="n">flag2</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">val</span> <span class="n">weights</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">DenseTensor2</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="mf">3.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">),</span> <span class="nc">Array</span><span class="o">(</span><span class="mf">2.0</span><span class="o">,</span> <span class="mf">4.0</span><span class="o">)))</span>
      <span class="k">def</span> <span class="n">statisticsScore</span><span class="o">(</span><span class="n">tensor</span><span class="k">:</span><span class="kt">Tensor</span><span class="o">)</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="n">weights</span> <span class="n">dot</span> <span class="n">tensor</span>
    <span class="o">}</span>
</code></pre></div>
<p>Because it is furthermore common that the score be
a dot product of the Tensor statistics and a &quot;weight&quot; parameter Tensor,
there are Factor subclasses that pre-define scoreStatistics to perform this dot-product.
Only the &quot;weightsSet&quot; method is abstract.</p>
<div class="highlight"><pre><code class="scala language-scala" data-lang="scala">    <span class="k">val</span> <span class="n">f8</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">DotFactorWithStatistics2</span><span class="o">(</span><span class="n">flag1</span><span class="o">,</span> <span class="n">flag2</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">val</span> <span class="n">weights</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">DenseTensor2</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="mf">3.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">),</span> <span class="nc">Array</span><span class="o">(</span><span class="mf">2.0</span><span class="o">,</span> <span class="mf">4.0</span><span class="o">)))</span>
    <span class="o">}</span>
</code></pre></div>
<p>If you want the score to be such a dot-product, but you want the statistics Tensor
to be something other than the outer product of the neighbor values,
you can use the DotFactor{1,2,3,4} classes.
Here only the &quot;statistics&quot; and &quot;weightsSet&quot; methods are abstract.</p>
<div class="highlight"><pre><code class="scala language-scala" data-lang="scala">    <span class="k">val</span> <span class="n">f9</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">DotFactor4</span><span class="o">(</span><span class="n">label1</span><span class="o">,</span> <span class="n">label2</span><span class="o">,</span> <span class="n">label3</span><span class="o">,</span> <span class="n">flag1</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">val</span> <span class="n">weights</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">DenseTensor2</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="nc">Array</span><span class="o">(</span><span class="mf">2.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">),</span> <span class="nc">Array</span><span class="o">(</span><span class="mf">1.0</span><span class="o">,</span> <span class="mf">2.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">),</span> <span class="nc">Array</span><span class="o">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">,</span> <span class="mf">2.0</span><span class="o">)))</span>
      <span class="k">override</span> <span class="k">def</span> <span class="n">statistics</span><span class="o">(</span><span class="n">lv1</span><span class="k">:</span><span class="kt">Label</span><span class="k">#</span><span class="kt">Value</span><span class="o">,</span> <span class="n">lv2</span><span class="k">:</span><span class="kt">Label</span><span class="k">#</span><span class="kt">Value</span><span class="o">,</span> <span class="n">lv3</span><span class="k">:</span><span class="kt">Label</span><span class="k">#</span><span class="kt">Value</span><span class="o">,</span> <span class="n">fv2</span><span class="k">:</span><span class="kt">BooleanValue</span><span class="o">)</span><span class="k">:</span> <span class="kt">Tensor</span> <span class="o">=</span> 
        <span class="k">if</span> <span class="o">(</span><span class="n">flag1</span><span class="o">.</span><span class="n">booleanValue</span><span class="o">)</span> <span class="n">lv1</span> <span class="n">outer</span> <span class="n">lv2</span> <span class="k">else</span> <span class="n">lv1</span> <span class="n">outer</span> <span class="n">lv3</span>
    <span class="o">}</span>

    <span class="c1">// Naturally, we can define a class of Factors all sharing the same &quot;score&quot; method</span>
    <span class="k">class</span> <span class="nc">MyFactor</span><span class="o">(</span><span class="n">n1</span><span class="k">:</span><span class="kt">IntegerVariable</span><span class="o">,</span> <span class="n">n2</span><span class="k">:</span><span class="kt">IntegerVariable</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Factor2</span><span class="o">(</span><span class="n">n1</span><span class="o">,</span> <span class="n">n2</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">def</span> <span class="n">score</span><span class="o">(</span><span class="n">i</span><span class="k">:</span><span class="kt">Int</span><span class="o">,</span> <span class="n">j</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="o">)</span> <span class="mf">1.0</span> <span class="k">else</span> <span class="o">-</span><span class="mf">1.0</span>
    <span class="o">}</span>
</code></pre></div>
<p>Factor equality is based on the Factor class and the identity of its neighboring variables.
That is, if I create two factors, having the same class and same neighbors,
the two factors will be equal.
(This helps us de-duplicate Factors coming from Templates.
We will describe Templates in a later tutorial.)</p>
<div class="highlight"><pre><code class="scala language-scala" data-lang="scala">    <span class="k">val</span> <span class="n">mf1</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">MyFactor</span><span class="o">(</span><span class="n">v1</span><span class="o">,</span> <span class="n">v3</span><span class="o">)</span>
    <span class="k">val</span> <span class="n">mf2</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">MyFactor</span><span class="o">(</span><span class="n">v1</span><span class="o">,</span> <span class="n">v3</span><span class="o">)</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">mf1</span> <span class="o">==</span> <span class="n">mf2</span><span class="o">)</span> <span class="n">println</span><span class="o">(</span><span class="s">&quot;Two factors are equal.&quot;</span><span class="o">)</span>
    <span class="n">assert</span><span class="o">(</span><span class="n">mf1</span> <span class="o">==</span> <span class="n">mf2</span><span class="o">)</span>
</code></pre></div>
<p>Let&#39;s create a Factor representing a simple log-linear classifier for classifying blog posts.
into the classes &quot;politics&quot;, &quot;sports&quot;, &quot;arts&quot;
The input is a feature vector of three boolean values indicating whether or not
a particular word was present in the document: &quot;beat&quot;, &quot;beautiful&quot;, &quot;election&quot;.</p>

<p>We can use the Label variable from above.
Here let&#39;s define a Variable Article for representing the feature vector.
WordDomain is the object WordDomain extends CategoricalDomain(List(&quot;beat&quot;, &quot;beautiful&quot;, &quot;election&quot;))</p>
<div class="highlight"><pre><code class="scala language-scala" data-lang="scala">    <span class="k">object</span> <span class="nc">WordDomain</span> <span class="k">extends</span> <span class="nc">CategoricalDomain</span><span class="o">(</span><span class="nc">List</span><span class="o">(</span><span class="s">&quot;beat&quot;</span><span class="o">,</span> <span class="s">&quot;beautiful&quot;</span><span class="o">,</span> <span class="s">&quot;election&quot;</span><span class="o">))</span>
    <span class="c1">// TODO Consider interface improvements to CategoricalVectorDomain initialization.</span>
    <span class="k">object</span> <span class="nc">ArticleDomain</span> <span class="k">extends</span> <span class="nc">CategoricalVectorDomain</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="o">{</span> <span class="k">override</span> <span class="k">def</span> <span class="n">dimensionDomain</span> <span class="k">=</span> <span class="nc">WordDomain</span> <span class="o">}</span>
    <span class="k">class</span> <span class="nc">Article</span><span class="o">(</span><span class="n">ws</span><span class="k">:</span><span class="kt">Iterable</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="k">extends</span> <span class="nc">BinaryFeatureVectorVariable</span><span class="o">[</span><span class="kt">String</span><span class="o">](</span><span class="n">ws</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">def</span> <span class="n">domain</span> <span class="k">=</span> <span class="nc">ArticleDomain</span>
    <span class="o">}</span>

    <span class="k">class</span> <span class="nc">MyClassifier</span><span class="o">(</span><span class="n">label</span><span class="k">:</span><span class="kt">Label</span><span class="o">,</span> <span class="n">article</span><span class="k">:</span><span class="kt">Article</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">DotFactorWithStatistics2</span><span class="o">(</span><span class="n">label</span><span class="o">,</span> <span class="n">article</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">val</span> <span class="n">weights</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">DenseTensor2</span><span class="o">(</span><span class="nc">LabelDomain</span><span class="o">.</span><span class="n">size</span><span class="o">,</span> <span class="nc">WordDomain</span><span class="o">.</span><span class="n">size</span><span class="o">)</span>
      <span class="n">weights</span><span class="o">(</span><span class="nc">LabelDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;politics&quot;</span><span class="o">),</span> <span class="nc">WordDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;beat&quot;</span><span class="o">))</span> <span class="k">=</span> <span class="mf">3.0</span>
      <span class="n">weights</span><span class="o">(</span><span class="nc">LabelDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;politics&quot;</span><span class="o">),</span> <span class="nc">WordDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;beautiful&quot;</span><span class="o">))</span> <span class="k">=</span> <span class="mf">2.0</span>
      <span class="n">weights</span><span class="o">(</span><span class="nc">LabelDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;politics&quot;</span><span class="o">),</span> <span class="nc">WordDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;election&quot;</span><span class="o">))</span> <span class="k">=</span> <span class="mf">5.0</span>
      <span class="n">weights</span><span class="o">(</span><span class="nc">LabelDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;sports&quot;</span><span class="o">),</span> <span class="nc">WordDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;beat&quot;</span><span class="o">))</span> <span class="k">=</span> <span class="mf">4.0</span>
      <span class="n">weights</span><span class="o">(</span><span class="nc">LabelDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;sports&quot;</span><span class="o">),</span> <span class="nc">WordDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;beautiful&quot;</span><span class="o">))</span> <span class="k">=</span> <span class="mf">1.0</span>
      <span class="n">weights</span><span class="o">(</span><span class="nc">LabelDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;sports&quot;</span><span class="o">),</span> <span class="nc">WordDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;election&quot;</span><span class="o">))</span> <span class="k">=</span> <span class="o">-</span><span class="mf">1.0</span>
      <span class="n">weights</span><span class="o">(</span><span class="nc">LabelDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;arts&quot;</span><span class="o">),</span> <span class="nc">WordDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;beat&quot;</span><span class="o">))</span> <span class="k">=</span> <span class="o">-</span><span class="mf">2.0</span>
      <span class="n">weights</span><span class="o">(</span><span class="nc">LabelDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;arts&quot;</span><span class="o">),</span> <span class="nc">WordDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;beautiful&quot;</span><span class="o">))</span> <span class="k">=</span> <span class="mf">5.0</span>
      <span class="n">weights</span><span class="o">(</span><span class="nc">LabelDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;arts&quot;</span><span class="o">),</span> <span class="nc">WordDomain</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;election&quot;</span><span class="o">))</span> <span class="k">=</span> <span class="mf">1.0</span>
    <span class="o">}</span>

    <span class="k">val</span> <span class="n">a1</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Article</span><span class="o">(</span><span class="s">&quot;beat election&quot;</span><span class="o">.</span><span class="n">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">))</span>
    <span class="k">val</span> <span class="n">l1</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Label</span><span class="o">(</span><span class="s">&quot;politics&quot;</span><span class="o">)</span>
    <span class="k">val</span> <span class="n">cf</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">MyClassifier</span><span class="o">(</span><span class="n">l1</span><span class="o">,</span> <span class="n">a1</span><span class="o">)</span>

    <span class="c1">// Any now we can do simple exhaustive inference</span>
    <span class="k">var</span> <span class="n">maxScore</span> <span class="k">=</span> <span class="nc">Double</span><span class="o">.</span><span class="nc">NegativeInfinity</span>
    <span class="k">var</span> <span class="n">maxLabeling</span> <span class="k">=</span> <span class="nc">LabelDomain</span><span class="o">.</span><span class="n">head</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">labeling</span> <span class="k">&lt;-</span> <span class="nc">LabelDomain</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">l1</span><span class="o">.</span><span class="n">set</span><span class="o">(</span><span class="n">labeling</span><span class="o">)(</span><span class="kc">null</span><span class="o">)</span>
      <span class="k">val</span> <span class="n">score</span> <span class="k">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">currentScore</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">score</span> <span class="o">&gt;</span> <span class="n">maxScore</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">maxScore</span> <span class="k">=</span> <span class="n">score</span>
        <span class="n">maxLabeling</span> <span class="k">=</span> <span class="n">labeling</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;When scoring &quot;</span><span class="o">+</span><span class="n">a1</span><span class="o">+</span><span class="s">&quot; the highest scoring label value is &quot;</span><span class="o">+</span><span class="n">maxLabeling</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>
<p>Of course there is much more rich and efficient support for classification
(including pre-built large-vocabulary document classification) available in FACTORIE.
The above is a simple demonstration.</p>

<p>Note that all MyClassifier Factors share the same weightsSet Tensor,
yet weightsSet is inefficiently created and filled separate for each MyClassifier instance.
FACTORIE has special support for representing commonalities between Factors
that belong to the same &quot;Family&quot;.</p>

	 </div>
	</div> <!-- /row -->
  <div class="footer" id="footer">
<hr>
  <p>
    Factorie is open source software <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>. Please <a href="/pubs.html">cite</a> for research use.<br>
    <a href="http://www.iesl.cs.umass.edu/">Information Extraction and Synthesis Laboratory</a> (IESL), <a href="http://www.cs.umass.edu/">School of Computer Science</a>, <a href="http://www.umass.edu/">University of Massachusetts Amherst</a>.
  </p>
</div>

  </div> <!-- /container -->
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="/assets/js/bootstrap.js"></script>
    <script src="/assets/js/offcanvas.js"></script>
    <script src="/assets/js/affix.js"></script>
	  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script>
	  $(document).ready(function() {
	
	   var docHeight = $(window).height();
	   var footerHeight = $('#footer').height();
	   var footerTop = $('#footer').position().top + footerHeight;
	
	   if (footerTop < docHeight) {
	    $('#footer').css('margin-top', 5 + (docHeight - footerTop) + 'px');
	   }
	  });
	 </script>
	 <script>
		 MathJax.Hub.Config({
		   "HTML-CSS": {styles: {".MathJax .mo, .MathJax .mi": {color: "#333333 ! important"}}},
	       tex2jax: {skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']}
	     });
	 </script>
</html>
